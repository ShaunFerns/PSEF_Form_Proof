{% extends "base.html" %}

{% block content %}
<div class="form-container">
    <h1>Section 4.2.1 â€“ Learner Access</h1>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul>
          {% for message in messages %}
            <li style="color: red;">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <form method="POST" enctype="multipart/form-data">
        <label for="programme_description">
            Describe how the Programme under review will enable and enhance access for all:
            <span id="word_count">(0/500 words)</span>
        </label>
        <textarea id="programme_description" name="programme_description" rows="10" required></textarea>

        <!-- Section (a) Pathways to TU Dublin -->
        <div class="section-block">
            <h3>(a) Pathways to TU Dublin</h3>

            <div class="checkbox-group">
                <h4>Quality Assurance (QA) Evidence</h4>

                <label>
                    <input type="checkbox" name="pathways_qa" value="Map of routes into programme">
                    Map of routes into the programme
                </label>
                <label>Upload evidence for this QA:</label>
                <input type="file" name="qa_file_map_of_routes">

                <label>
                    <input type="checkbox" name="pathways_qa" value="Equitable access with RPL">
                    Equitable access approach with RPL
                </label>
                <label>Upload evidence for this QA:</label>
                <input type="file" name="qa_file_equitable_access">
            </div>

            <div class="checkbox-group">
                <h4>Quality Enhancement (QE) Evidence</h4>

                <label>
                    <input type="checkbox" name="pathways_qe" value="Map of opportunities beyond programme">
                    Map of educational opportunities beyond the programme
                </label>
                <input type="file" name="qe_file_map_of_opportunities">

                <label>
                    <input type="checkbox" name="pathways_qe" value="Barrier modules reduced">
                    Barrier modules identified and reduced
                </label>
                <input type="file" name="qe_file_barrier_modules">

                <label>
                    <input type="checkbox" name="pathways_qe" value="Collaboration with FE partners">
                    Collaboration with FE partners
                </label>
                <input type="file" name="qe_file_collaboration_fe">

                <label>
                    <input type="checkbox" name="pathways_qe" value="Collaborative programme development">
                    Collaborative programme development actions
                </label>
                <input type="file" name="qe_file_collaborative_development">
            </div>
        </div>

        <!-- Section (b) Internationalisation -->
        <div class="section-block">
            <h3>(b) Internationalisation</h3>

            <div class="checkbox-group">
                <h4>Quality Assurance (QA) Evidence</h4>

                <label>
                    <input type="checkbox" name="internationalisation_qa" value="International recruitment targets">
                    Clear, realistic international recruitment targets
                </label>
                <label>Upload evidence for this QA:</label>
                <input type="file" name="qa_file_international_targets">
            </div>

            <div class="checkbox-group">
                <h4>Quality Enhancement (QE) Evidence</h4>

                <label>
                    <input type="checkbox" name="internationalisation_qe" value="Qualification equivalency applied">
                    Qualification equivalency applied
                </label>
                <input type="file" name="qe_file_qualification_equivalency">

                <label>
                    <input type="checkbox" name="internationalisation_qe" value="Orientation for international learners">
                    Orientation and induction for international learners
                </label>
                <input type="file" name="qe_file_orientation">

                <label>
                    <input type="checkbox" name="internationalisation_qe" value="Supports: bridging, language, skills">
                    Supports: bridging modules, language support, academic skills
                </label>
                <input type="file" name="qe_file_supports">

                <label>
                    <input type="checkbox" name="internationalisation_qe" value="Culturally inclusive curriculum">
                    Culturally inclusive curriculum underpins programme
                </label>
                <input type="file" name="qe_file_culturally_inclusive">
            </div>
        </div>

        <button type="submit" name="action" value="save">ðŸ’¾ Save as Draft</button>
        <button type="submit" name="action" value="submit">âœ… Submit</button>
    </form>
</div>

<div class="instructions">
    <h2>Guidance â€“ Section 4.2.1 Learner Access</h2>
    <p>Describe how the Programme under review will enable and enhance access for all learners, informed by:</p>
    <ul>
        <li><a href="https://www.tudublin.ie/intranet/education-model/" target="_blank"><strong>UEM Fundamental 3</strong></a>: Diversity of entry routes (race, ethnicity, CAO/non-CAO, non-standard, socio-economic)</li>
        <li><a href="https://www.tudublin.ie/intranet/education-model/" target="_blank"><strong>UEM Fundamental 4</strong></a>: Learner choice, including exit routes</li>
        <li>Equality of opportunity, including Recognition of Prior Learning (RPL)</li>
        <li>TU Dublin/Sector internationalisation guidelines</li>
    </ul>
    <p>Upload evidence under QA items (required on submit). QE uploads are optional and only needed if selected.</p>
</div>

<script>
    const textarea = document.getElementById('programme_description');
    const wordCount = document.getElementById('word_count');

    textarea.addEventListener('input', () => {
        const words = textarea.value.trim().split(/\s+/).filter(Boolean);
        wordCount.textContent = `(${words.length}/500 words)`;
        if (words.length > 500) {
            textarea.value = words.slice(0, 500).join(' ');
            wordCount.textContent = "(500/500 words)";
        }
    });
</script>
{% endblock %}






